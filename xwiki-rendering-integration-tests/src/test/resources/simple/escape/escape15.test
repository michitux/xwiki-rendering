.#---------------------------------------------------------------------------------------------------------
.input|xwiki/2.0
.# Verify that internal link syntax is escaped
.#---------------------------------------------------------------------------------------------------------
[[lab~>~>el~~~~>>refe~|~|rence||param="value"]]
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginParagraph
beginLink [Typed = [false] Type = [url] Reference = [refe||rence]] [false] [[param]=[value]]
onWord [lab]
onSpecialSymbol [>]
onSpecialSymbol [>]
onWord [el]
onSpecialSymbol [~]
endLink [Typed = [false] Type = [url] Reference = [refe||rence]] [false] [[param]=[value]]
endParagraph
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<p><span class="wikiexternallink"><a data-xwiki-translated-attribute-param="value" href="refe||rence">lab&gt;&gt;el~</a></span></p>
.#-----------------------------------------------------
.expect|annotatedxhtml/1.0
.#-----------------------------------------------------
<p><!--startwikilink:false|-|url|-|refe||rence--><span class="wikiexternallink"><a data-xwiki-translated-attribute-param="value" href="refe||rence">lab&gt;&gt;el~</a></span><!--stopwikilink--></p>
.#-----------------------------------------------------
.expect|xwiki/2.0
.#-----------------------------------------------------
[[lab~>~>el~~~~>>refe~|~|rence||param="value"]]
.#-----------------------------------------------------
.input|xhtml/1.0
.#-----------------------------------------------------
<p><!--startwikilink:false|-|url|-|refe||rence--><span class="wikiexternallink"><a data-xwiki-translated-attribute-param="value" href="refe||rence">lab&gt;&gt;el~</a></span><!--stopwikilink--></p>