.#-----------------------------------------------------
.input|xwiki/2.1
.# Verify that Query String is correctly taken into
.# account, including when there are parameters.
.#-----------------------------------------------------
[[image:Space.ExistingPage@my.png||queryString="param1=value1" param2="value2"]]
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginParagraph
onImage [Typed = [false] Type = [attach] Reference = [Space.ExistingPage@my.png] Parameters = [[queryString] = [param1=value1]]] [false] [ISpace.ExistingPage40my.png] [[param2]=[value2]]
endParagraph
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<p><img src="imageurl?param1=value1" data-xwiki-translated-attribute-param2="value2" id="ISpace.ExistingPage40my.png" class="wikigeneratedid" alt="Space.ExistingPage@my.png"/></p>
.#-----------------------------------------------------
.expect|annotatedxhtml/1.0
.#-----------------------------------------------------
<p><!--startimage:false|-|attach|-|Space.ExistingPage@my.png|-|queryString="param1=value1"--><img src="imageurl?param1=value1" data-xwiki-translated-attribute-param2="value2" id="ISpace.ExistingPage40my.png" class="wikigeneratedid" alt="Space.ExistingPage@my.png"/><!--stopimage--></p>
.#-----------------------------------------------------
.expect|xwiki/2.1
.#-----------------------------------------------------
[[image:Space.ExistingPage@my.png||queryString="param1=value1" param2="value2"]]
.#-----------------------------------------------------
.input|xhtml/1.0
.#-----------------------------------------------------
<p><!--startimage:false|-|attach|-|Space.ExistingPage@my.png|-|queryString="param1=value1"--><img src="imageurl?param1=value1" data-xwiki-translated-attribute-param2="value2" id="ISpace.ExistingPage40my.png" class="wikigeneratedid" alt="Space.ExistingPage@my.png"/><!--stopimage--></p>