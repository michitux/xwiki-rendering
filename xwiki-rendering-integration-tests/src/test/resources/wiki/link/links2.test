.#-----------------------------------------------------
.input|xwiki/2.0
.# Verify that Anchors and Query String are correctly
.# taken into account, including when there are
.# parameters.
.#-----------------------------------------------------
[[Space.ExistingPage#anchor?param1=value1||param2="value2"]]
.#-----------------------------------------------------
.input|xwiki/2.1
.#-----------------------------------------------------
[[Space.ExistingPage||queryString="param1=value1" anchor="anchor" param2="value2"]]
.#-----------------------------------------------------
.expect|event/1.0
.#-----------------------------------------------------
beginDocument
beginParagraph
beginLink [Typed = [false] Type = [doc] Reference = [Space.ExistingPage] Parameters = [[queryString] = [param1=value1], [anchor] = [anchor]]] [false] [[param2]=[value2]]
endLink [Typed = [false] Type = [doc] Reference = [Space.ExistingPage] Parameters = [[queryString] = [param1=value1], [anchor] = [anchor]]] [false] [[param2]=[value2]]
endParagraph
endDocument
.#-----------------------------------------------------
.expect|xhtml/1.0
.#-----------------------------------------------------
<p><span class="wikilink"><a data-xwiki-translated-attribute-param2="value2" href="viewurl?param1=value1#anchor"><span class="wikigeneratedlinkcontent">Space.ExistingPage</span></a></span></p>
.#-----------------------------------------------------
.expect|annotatedxhtml/1.0
.#-----------------------------------------------------
<p><!--startwikilink:false|-|doc|-|Space.ExistingPage|-|queryString="param1=value1" anchor="anchor"--><span class="wikilink"><a data-xwiki-translated-attribute-param2="value2" href="viewurl?param1=value1#anchor"><span class="wikigeneratedlinkcontent">Space.ExistingPage</span></a></span><!--stopwikilink--></p>
.#-----------------------------------------------------
.expect|xwiki/2.0
.#-----------------------------------------------------
[[Space.ExistingPage#anchor?param1=value1||param2="value2"]]
.#-----------------------------------------------------
.expect|xwiki/2.1
.#-----------------------------------------------------
[[Space.ExistingPage||queryString="param1=value1" anchor="anchor" param2="value2"]]
.#-----------------------------------------------------
.input|xhtml/1.0
.#-----------------------------------------------------
<p><!--startwikilink:false|-|doc|-|Space.ExistingPage|-|queryString="param1=value1" anchor="anchor"--><span class="wikilink"><a data-xwiki-translated-attribute-param2="value2" href="viewurl?param1=value1#anchor"><span class="wikigeneratedlinkcontent">Space.ExistingPage</span></a></span><!--stopwikilink--></p>